<section id="counter-section" class="container text-center pb-5">
    <div class="row">
        <div class="col">
        <i class="bi bi-2-circle-fill" data-aos="special-fade-down"></i>
        <h3><span class="counter" data-target="320">10</span>+ </h3>
        <p class="lead">Upskilled</p>
        </div>
        <div class="col">
        <i class="bi bi-2-circle-fill" data-aos="special-fade-down"  data-aos-delay="100"></i>
        <h3><span class="counter" data-target="120">30</span></h3>
        <p class="lead">Guides</p>
        </div>
        <div class="col">
        <i class="bi bi-2-circle-fill" data-aos="special-fade-down"  data-aos-delay="200"></i>
        <h3><span class="counter" data-target="480">50</span></h3>
        <p class="lead">Workshop Done</p>
        </div>
        <div class="col">
        <i class="bi bi-2-circle-fill" data-aos="special-fade-down"  data-aos-delay="300"></i>
        <h3><span class="counter" data-target="80">40</span>+ </h3>
        <p class="lead">Classes Done</p>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const counters = document.querySelectorAll('.counter');
  const counterSection = document.getElementById('counter-section');
  const counter_duration = 3500;
  let start;

  function easeInOutQuad(t, b, c, d) {
    t /= d / 2;
    if (t < 1) return c / 2 * t * t + b;
    t--;
    return -c / 2 * (t * (t - 2) - 1) + b;
  }

  function updateCounter(timestamp, counter, startValue, endValue, duration) {
    if (!start) start = timestamp;
    const elapsed = timestamp - start;
    const current = easeInOutQuad(elapsed, startValue, endValue - startValue, duration);

    counter.innerText = Math.round(current);

    if (elapsed < duration) {
      requestAnimationFrame(timestamp => updateCounter(timestamp, counter, startValue, endValue, duration));
    } else {
      counter.innerText = endValue;
    }
  }

  window.addEventListener('scroll', function() {
    const sectionPos = counterSection.getBoundingClientRect().top;
    const screenPos = window.innerHeight / 1.3;

    if (sectionPos < screenPos) {
      counters.forEach(counter => {
        const endValue = +counter.getAttribute('data-target');
        const startValue = +counter.innerText;
        start = null; // Reset the start time
        requestAnimationFrame(timestamp => updateCounter(timestamp, counter, startValue, endValue, counter_duration));
      });
    }
  });
});
</script>